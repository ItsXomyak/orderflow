# ๐ OrderFlow - ะะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ

## ๐ฏ ะงัะพ ััะพ ะทะฐ ะฟัะพะตะบั?

**OrderFlow** - ััะพ ัะธััะตะผะฐ ะพะฑัะฐะฑะพัะบะธ ะทะฐะบะฐะทะพะฒ, ะฟะพัััะพะตะฝะฝะฐั ะฝะฐ Go ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Temporal.io ะดะปั ะพัะบะตัััะฐัะธะธ ัะฐะฑะพัะธั ะฟัะพัะตััะพะฒ. ะัะพะตะบั ะดะตะผะพะฝัััะธััะตั ัะพะฒัะตะผะตะฝะฝัั ะฐััะธัะตะบัััั ะผะธะบัะพัะตัะฒะธัะพะฒ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Docker ะธ PostgreSQL.

## ๐๏ธ ะััะธัะตะบัััะฐ ัะธััะตะผั

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Web Interface โ    โ   API Server    โ    โ  Temporal      โ
โ   (Port 8080)   โโโโโบโ   (Port 8080)   โโโโโบโ  (Port 7233)   โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                                โ                       โ
                                โผ                       โผ
                       โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                       โ   PostgreSQL    โ    โ     Redis       โ
                       โ   (Port 5432)   โ    โ   (Port 6379)   โ
                       โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

### ะะพะผะฟะพะฝะตะฝัั ัะธััะตะผั:

- **API Server** - REST API ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะทะฐะบะฐะทะฐะผะธ
- **Worker** - ะพะฑัะฐะฑะพััะธะบ ัะฐะฑะพัะธั ะฟัะพัะตััะพะฒ Temporal
- **Temporal** - ะพัะบะตัััะฐัะพั ัะฐะฑะพัะธั ะฟัะพัะตััะพะฒ
- **PostgreSQL** - ะพัะฝะพะฒะฝะฐั ะฑะฐะทะฐ ะดะฐะฝะฝัั
- **Redis** - ะบัั ะดะปั Temporal
- **Web UI** - ะฒะตะฑ-ะธะฝัะตััะตะนั ะดะปั ัะฟัะฐะฒะปะตะฝะธั

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
orderflow/
โโโ ๐ cmd/                    # ะขะพัะบะธ ะฒัะพะดะฐ ะฟัะธะปะพะถะตะฝะธั
โ   โโโ ๐ api/               # API ัะตัะฒะตั
โ   โโโ ๐ worker/            # Worker ะดะปั Temporal
โโโ ๐ internal/               # ะะฝัััะตะฝะฝัั ะปะพะณะธะบะฐ ะฟัะธะปะพะถะตะฝะธั
โ   โโโ ๐ domain/            # ะะธะทะฝะตั-ะปะพะณะธะบะฐ ะธ ะผะพะดะตะปะธ
โ   โโโ ๐ application/       # ะกะปะพะน ะฟัะธะปะพะถะตะฝะธั (use cases)
โ   โโโ ๐ interfaces/        # HTTP handlers, ัะตะฟะพะทะธัะพัะธะธ
โ   โโโ ๐ infrastructure/    # ะะฝะตัะฝะธะต ะทะฐะฒะธัะธะผะพััะธ (ะะ, ะบัั)
โโโ ๐ migrations/             # SQL ะผะธะณัะฐัะธะธ ะดะปั PostgreSQL
โโโ ๐ temporal-config/        # ะะพะฝัะธะณััะฐัะธั Temporal
โโโ ๐ templates/              # HTML ัะฐะฑะปะพะฝั
โโโ ๐ static/                 # ะกัะฐัะธัะตัะบะธะต ัะฐะนะปั (CSS, JS)
โโโ ๐ bin/                    # ะกะบะพะผะฟะธะปะธัะพะฒะฐะฝะฝัะต ะฑะธะฝะฐัะฝะธะบะธ
โโโ ๐ pkg/                    # ะะตัะตะธัะฟะพะปัะทัะตะผัะต ะฟะฐะบะตัั
โโโ ๐ณ Dockerfile              # Docker ะพะฑัะฐะท
โโโ ๐ณ docker-compose.yml      # ะัะบะตัััะฐัะธั ัะตัะฒะธัะพะฒ
โโโ ๐ env.example             # ะัะธะผะตั ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
โโโ ๐ go.mod                  # Go ะผะพะดัะปะธ ะธ ะทะฐะฒะธัะธะผะพััะธ
โโโ ๐ Makefile                # ะะพะผะฐะฝะดั ะดะปั ัะฐะทัะฐะฑะพัะบะธ
โโโ ๐ README.md               # ะัะฝะพะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
```

## ๐ง ะงัะพ ะผั ะดะพะฑะฐะฒะธะปะธ/ะธะทะผะตะฝะธะปะธ

### 1. ะคะฐะนะป ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั (`env.example`)

**ะะฐัะตะผ ะฝัะถะตะฝ:** ะัะฝะตัะปะธ ะฒัะต ัะฐัะดะบะพะด ะทะฝะฐัะตะฝะธั ะธะท Docker ะฒ ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะดะปั ะณะธะฑะบะพััะธ ะฝะฐัััะพะนะบะธ.

**ะงัะพ ัะพะดะตัะถะธั:**

```bash
# PostgreSQL ะฝะฐัััะพะนะบะธ
POSTGRES_DB=orderflow
POSTGRES_USER=orderflow
POSTGRES_PASSWORD=orderflow123
POSTGRES_PORT=5432
POSTGRES_HOST=postgres

# Redis ะฝะฐัััะพะนะบะธ
REDIS_PORT=6379

# Temporal ะฝะฐัััะพะนะบะธ
TEMPORAL_HOST_PORT=temporal:7233
TEMPORAL_WEB_PORT=8088

# ะะพัั ะฟัะธะปะพะถะตะฝะธั
API_PORT=8080
```

### 2. ะะฑะฝะพะฒะปะตะฝะฝัะน `docker-compose.yml`

**ะงัะพ ะธะทะผะตะฝะธะปะพัั:** ะัะต ะทะฝะฐัะตะฝะธั ัะตะฟะตัั ะธัะฟะพะปัะทััั ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั `${VARIABLE_NAME}`

**ะัะธะผะตั ะธะทะผะตะฝะตะฝะธะน:**

```yaml
# ะัะปะพ:
POSTGRES_PASSWORD: orderflow123

# ะกัะฐะปะพ:
POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
```

**ะัะตะธะผััะตััะฒะฐ:**

- โ ะะตะณะบะพ ะผะตะฝััั ะฝะฐัััะพะนะบะธ ะฑะตะท ัะตะดะฐะบัะธัะพะฒะฐะฝะธั Docker ัะฐะนะปะพะฒ
- โ ะะฐะทะฝัะต ะบะพะฝัะธะณััะฐัะธะธ ะดะปั ัะฐะทะฝัั ะพะบััะถะตะฝะธะน (dev, staging, prod)
- โ ะะตะทะพะฟะฐัะฝะพััั - ะฟะฐัะพะปะธ ะฝะต ะฒ ะบะพะดะต
- โ ะะธะฑะบะพััั ะฝะฐัััะพะนะบะธ ะฟะพััะพะฒ

## ๐ ะะฐะบ ะทะฐะฟัััะธัั ะฟัะพะตะบั

### ะัััััะน ััะฐัั:

1. **ะกะบะพะฟะธััะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:**

   ```bash
   cp env.example .env
   ```

2. **ะะฐะฟัััะธัะต ะฒัะต ัะตัะฒะธัั:**

   ```bash
   docker-compose up -d
   ```

3. **ะัะพะฒะตัััะต ััะฐััั:**
   ```bash
   docker-compose ps
   ```

### ะะพัััะฟะฝัะต ัะตัะฒะธัั:

| ะกะตัะฒะธั           | URL                   | ะะฟะธัะฐะฝะธะต              |
| ---------------- | --------------------- | --------------------- |
| **API**          | http://localhost:8080 | ะัะฝะพะฒะฝะพะต ะฟัะธะปะพะถะตะฝะธะต   |
| **Temporal Web** | http://localhost:8088 | ะฃะฟัะฐะฒะปะตะฝะธะต ะฟัะพัะตััะฐะผะธ |
| **PostgreSQL**   | localhost:5432        | ะะฐะทะฐ ะดะฐะฝะฝัั           |
| **Redis**        | localhost:6379        | ะัั                   |

## ๐๏ธ ะะฐะทัะฐะฑะพัะบะฐ

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ:

```bash
# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
go mod download

# ะะฐะฟััะบ API
go run cmd/api/main.go

# ะะฐะฟััะบ Worker
go run cmd/worker/main.go
```

### Docker ัะฐะทัะฐะฑะพัะบะฐ:

```bash
# ะะตัะตัะฑะพัะบะฐ ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose build

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f api
docker-compose logs -f worker
```

### ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั Make:

```bash
make start-full-stack    # ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
make docker-logs         # ะัะพัะผะพัั ะปะพะณะพะฒ
make docker-down         # ะััะฐะฝะพะฒะบะฐ ัะตัะฒะธัะพะฒ
make build               # ะกะฑะพัะบะฐ Go ะฟัะธะปะพะถะตะฝะธั
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะฐะถะฝัะต ะผะพะผะตะฝัั:

1. **ะคะฐะนะป `.env` ะะ ะบะพะผะผะธัะธััั** ะฒ Git (ัะถะต ะดะพะฑะฐะฒะปะตะฝ ะฒ `.gitignore`)
2. **ะะฐัะพะปะธ ะฟะพ ัะผะพะปัะฐะฝะธั** ัะพะปัะบะพ ะดะปั ัะฐะทัะฐะฑะพัะบะธ
3. **ะ ะฟัะพะดะฐะบัะตะฝะต** ะพะฑัะทะฐัะตะปัะฝะพ ะธะทะผะตะฝะธัะต ะฒัะต ะฟะฐัะพะปะธ

### ะะฐัััะพะนะบะฐ ะฟัะพะดะฐะบัะตะฝะฐ:

```bash
# ะกะพะทะดะฐะนัะต .env.production
cp env.example .env.production

# ะััะตะดะฐะบัะธััะนัะต ั ัะตะฐะปัะฝัะผะธ ะทะฝะฐัะตะฝะธัะผะธ
nano .env.production

# ะะฐะฟัััะธัะต ั ะฟัะพะดะฐะบัะตะฝ ะบะพะฝัะธะณะพะผ
docker-compose --env-file .env.production up -d
```

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะปะพะณะธ

### ะัะพัะผะพัั ะปะพะณะพะฒ:

```bash
# ะัะต ัะตัะฒะธัั
docker-compose logs -f

# ะะพะฝะบัะตัะฝัะน ัะตัะฒะธั
docker-compose logs -f api
docker-compose logs -f postgres
docker-compose logs -f temporal
```

### Health checks:

ะัะต ัะตัะฒะธัั ะธะผะตัั ะฒัััะพะตะฝะฝัะต ะฟัะพะฒะตัะบะธ ะทะดะพัะพะฒัั:

- PostgreSQL: ะฟัะพะฒะตัะบะฐ ะณะพัะพะฒะฝะพััะธ ะะ
- Redis: ping ะบะพะผะฐะฝะดะฐ
- API/Worker: ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะฟะตัะตะทะฐะฟััะบ ะฟัะธ ัะฑะพัั

## ๐ Workflow ั Temporal

### ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั:

1. **API ะฟะพะปััะฐะตั ะทะฐะบะฐะท** ะพั ะฟะพะปัะทะพะฒะฐัะตะปั
2. **ะกะพะทะดะฐะตััั Temporal workflow** ะดะปั ะพะฑัะฐะฑะพัะบะธ
3. **Worker ะฒัะฟะพะปะฝัะตั ัะฐะณะธ** workflow (ะฒะฐะปะธะดะฐัะธั, ะพะฟะปะฐัะฐ, ะดะพััะฐะฒะบะฐ)
4. **ะะฐะถะดัะน ัะฐะณ** ะผะพะถะตั ะฑััั ะฟะพะฒัะพัะตะฝ ะฟัะธ ะพัะธะฑะบะต
5. **ะะตะทัะปััะฐั ัะพััะฐะฝัะตััั** ะฒ PostgreSQL

### ะัะตะธะผััะตััะฒะฐ Temporal:

- โ **ะะฐะดะตะถะฝะพััั** - ะฐะฒัะพะผะฐัะธัะตัะบะธะต ะฟะพะฒัะพัั ะฟัะธ ัะฑะพัั
- โ **ะะพะฝะธัะพัะธะฝะณ** - ะฒะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะพััะปะตะถะธะฒะฐะฝะธั ะฟัะพัะตััะพะฒ
- โ **ะะฐัััะฐะฑะธััะตะผะพััั** - ะปะตะณะบะพ ะดะพะฑะฐะฒะปััั ะฝะพะฒัะต workers
- โ **ะะตััะธะพะฝะธัะพะฒะฐะฝะธะต** - ะฑะตะทะพะฟะฐัะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต workflow

## ๐ ะัะปะฐะดะบะฐ

### ะงะฐัััะต ะฟัะพะฑะปะตะผั:

1. **ะะพัั ะทะฐะฝัั:**

   ```bash
   # ะัะพะฒะตัััะต ััะพ ะธัะฟะพะปัะทัะตั ะฟะพัั
   netstat -tulpn | grep :8080
   ```

2. **ะะพะฝัะตะนะฝะตั ะฝะต ะทะฐะฟััะบะฐะตััั:**

   ```bash
   # ะะพัะผะพััะธัะต ะปะพะณะธ
   docker-compose logs service_name
   ```

3. **ะะ ะฝะต ะฟะพะดะบะปััะฐะตััั:**
   ```bash
   # ะัะพะฒะตัััะต ะฟะตัะตะผะตะฝะฝัะต ะฒ .env
   cat .env | grep POSTGRES
   ```

### ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั:

```bash
# ะะตัะตะทะฐะฟััะบ ัะตัะฒะธัะฐ
docker-compose restart api

# ะะพะปะฝะฐั ะฟะตัะตัะฑะพัะบะฐ
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

## ๐ ะกะปะตะดัััะธะต ัะฐะณะธ

### ะงัะพ ะผะพะถะฝะพ ัะปัััะธัั:

1. **ะะพะฑะฐะฒะธัั ะผะพะฝะธัะพัะธะฝะณ** (Prometheus + Grafana)
2. **ะะฐัััะพะธัั CI/CD** pipeline
3. **ะะพะฑะฐะฒะธัั ัะตััั** ะดะปั API ะธ workflow
4. **ะะตะฐะปะธะทะพะฒะฐัั ะฐััะตะฝัะธัะธะบะฐัะธั** ะฟะพะปัะทะพะฒะฐัะตะปะตะน
5. **ะะพะฑะฐะฒะธัั ะผะตััะธะบะธ** ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

### ะะพะปะตะทะฝัะต ัััะปะบะธ:

- [Temporal Documentation](https://docs.temporal.io/)
- [Go Best Practices](https://golang.org/doc/effective_go.html)
- [Docker Compose Reference](https://docs.docker.com/compose/)

---

## ๐ก ะะฐะบะปััะตะฝะธะต

ะขะตะฟะตัั ั ะฒะฐั ะตััั ะฟะพะปะฝะพัััั ะฝะฐัััะพะตะฝะฝะฐั ัะธััะตะผะฐ OrderFlow ั:

- โ ะัะฝะตัะตะฝะฝัะผะธ ะฒ ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะฝะฐัััะพะนะบะฐะผะธ
- โ ะะพัะพะฒัะผะธ Docker ะบะพะฝัะตะนะฝะตัะฐะผะธ
- โ Temporal ะดะปั ะฝะฐะดะตะถะฝะพะน ะพะฑัะฐะฑะพัะบะธ ะทะฐะบะฐะทะพะฒ
- โ PostgreSQL ะดะปั ััะฐะฝะตะฝะธั ะดะฐะฝะฝัั
- โ ะัะพัััะผ ะทะฐะฟััะบะพะผ ัะตัะตะท `docker-compose up -d`

ะัะพััะพ ัะบะพะฟะธััะนัะต `env.example` ะฒ `.env`, ะพััะตะดะฐะบัะธััะนัะต ะทะฝะฐัะตะฝะธั ะฟะพะด ะฒะฐัะต ะพะบััะถะตะฝะธะต ะธ ะทะฐะฟััะบะฐะนัะต! ๐
